<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edmund's FOS Detector | AI-Powered Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
            max-width: 800px;
            width: 100%;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .logo {
            font-size: 60px;
            margin-bottom: 10px;
        }
        
        h1 {
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.1rem;
        }
        
        .input-section {
            margin-bottom: 30px;
        }
        
        label {
            display: block;
            color: #555;
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            min-height: 150px;
            transition: border-color 0.3s;
        }
        
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .char-counter {
            text-align: right;
            color: #999;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .analyze-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: block;
            margin: 0 auto;
        }
        
        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        
        .analyze-btn:active {
            transform: translateY(0);
        }
        
        .analyze-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .results {
            margin-top: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            display: none;
        }
        
        .results.show {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .risk-level {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .risk-safe { background: #d4edda; color: #155724; }
        .risk-low { background: #d1ecf1; color: #0c5460; }
        .risk-medium { background: #fff3cd; color: #856404; }
        .risk-high { background: #f8d7da; color: #721c24; }
        
        .analysis-section {
            margin-top: 20px;
        }
        
        .analysis-section h3 {
            color: #444;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .analysis-content {
            color: #666;
            line-height: 1.6;
            padding: 15px;
            background: white;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .indicators {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .indicator {
            padding: 15px;
            background: white;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }
        
        .indicator-label {
            color: #888;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .indicator-value {
            color: #333;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin-top: 20px;
        }
        
        .loading.show {
            display: block;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üîç</div>
            <h1>Edmund's FOS Detector</h1>
            <p class="subtitle">Advanced Pattern Recognition & Behavioral Analysis</p>
        </div>
        
        <div class="input-section">
            <label for="statement">Enter Statement for Analysis:</label>
            <textarea 
                id="statement" 
                placeholder="Type or paste the statement you want to analyze..."
                maxlength="5000"
            ></textarea>
            <div class="char-counter">
                <span id="charCount">0</span> / 5000 characters
            </div>
        </div>
        
        <button class="analyze-btn" onclick="analyzeStatement()">
            Analyze Statement
        </button>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="margin-top: 15px; color: #666;">Analyzing statement...</p>
        </div>
        
        <div class="error-message" id="error">
            <strong>Error:</strong> <span id="errorText"></span>
        </div>
        
        <div class="results" id="results">
            <div class="risk-level" id="riskLevel"></div>
            
            <div class="indicators" id="indicators"></div>
            
            <div class="analysis-section">
                <h3>Detailed Analysis</h3>
                <div class="analysis-content" id="analysis"></div>
            </div>
            
            <div class="analysis-section">
                <h3>Key Indicators</h3>
                <div class="analysis-content" id="keyIndicators"></div>
            </div>
            
            <div class="analysis-section">
                <h3>Recommendations</h3>
                <div class="analysis-content" id="recommendations"></div>
            </div>
        </div>
    </div>
    
    <script>
        // Character counter
        const textarea = document.getElementById('statement');
        const charCount = document.getElementById('charCount');
        
        textarea.addEventListener('input', function() {
            charCount.textContent = this.value.length;
        });
        
        // Analysis function
        function analyzeStatement() {
            const statement = document.getElementById('statement').value.trim();
            
            if (!statement) {
                showError('Please enter a statement to analyze.');
                return;
            }
            
            // Hide previous results and errors
            document.getElementById('results').classList.remove('show');
            document.getElementById('error').classList.remove('show');
            
            // Show loading
            document.getElementById('loading').classList.add('show');
            
            // Disable button
            document.querySelector('.analyze-btn').disabled = true;
            
            // Simulate analysis (since we can't use OpenAI API directly from client-side)
            setTimeout(() => {
                performAnalysis(statement);
            }, 2000);
        }
        
        function performAnalysis(statement) {
            // Hide loading
            document.getElementById('loading').classList.remove('show');
            
            // Re-enable button
            document.querySelector('.analyze-btn').disabled = false;
            
            // Pattern-based analysis (simplified version)
            const analysis = analyzePatterns(statement);
            
            // Display results
            displayResults(analysis);
        }
        
        function analyzePatterns(statement) {
            const lowercaseStatement = statement.toLowerCase();
            const wordCount = statement.split(/\s+/).length;
            const sentenceCount = statement.split(/[.!?]+/).filter(s => s.trim()).length;
            
            // Deception indicators (simplified pattern matching)
            const hedgingWords = ['maybe', 'perhaps', 'possibly', 'might', 'could', 'probably', 'somewhat', 'sort of', 'kind of'];
            const distancingWords = ['that', 'those', 'their', 'they'];
            const vagueWords = ['stuff', 'things', 'something', 'whatever', 'basically'];
            const qualifiers = ['honestly', 'frankly', 'to be honest', 'actually', 'really', 'truly'];
            
            let riskScore = 0;
            let indicators = [];
            
            // Check for hedging language
            const hedgingCount = hedgingWords.filter(word => lowercaseStatement.includes(word)).length;
            if (hedgingCount > 2) {
                riskScore += 20;
                indicators.push('Excessive hedging language detected');
            }
            
            // Check for distancing language
            const distancingCount = distancingWords.filter(word => 
                new RegExp(`\\b${word}\\b`, 'gi').test(statement)
            ).length;
            if (distancingCount > wordCount * 0.1) {
                riskScore += 15;
                indicators.push('Distancing language patterns found');
            }
            
            // Check for vague terminology
            const vagueCount = vagueWords.filter(word => lowercaseStatement.includes(word)).length;
            if (vagueCount > 1) {
                riskScore += 15;
                indicators.push('Vague terminology detected');
            }
            
            // Check for unnecessary qualifiers
            const qualifierCount = qualifiers.filter(word => lowercaseStatement.includes(word)).length;
            if (qualifierCount > 1) {
                riskScore += 20;
                indicators.push('Overuse of truth qualifiers');
            }
            
            // Check for overly complex sentences
            const avgWordsPerSentence = wordCount / sentenceCount;
            if (avgWordsPerSentence > 25) {
                riskScore += 10;
                indicators.push('Overly complex sentence structure');
            }
            
            // Check for lack of detail
            if (wordCount < 30 && sentenceCount < 3) {
                riskScore += 15;
                indicators.push('Lack of specific details');
            }
            
            // Determine risk level
            let riskLevel, riskClass;
            if (riskScore < 20) {
                riskLevel = 'LOW RISK - Statement appears genuine';
                riskClass = 'risk-safe';
            } else if (riskScore < 40) {
                riskLevel = 'MODERATE RISK - Some deception indicators present';
                riskClass = 'risk-low';
            } else if (riskScore < 60) {
                riskLevel = 'ELEVATED RISK - Multiple deception patterns detected';
                riskClass = 'risk-medium';
            } else {
                riskLevel = 'HIGH RISK - Significant deception indicators found';
                riskClass = 'risk-high';
            }
            
            return {
                riskLevel,
                riskClass,
                riskScore,
                indicators,
                metrics: {
                    'Word Count': wordCount,
                    'Sentence Count': sentenceCount,
                    'Avg Words/Sentence': avgWordsPerSentence.toFixed(1),
                    'Risk Score': riskScore + '%'
                }
            };
        }
        
        function displayResults(analysis) {
            // Set risk level
            const riskLevelDiv = document.getElementById('riskLevel');
            riskLevelDiv.textContent = analysis.riskLevel;
            riskLevelDiv.className = 'risk-level ' + analysis.riskClass;
            
            // Display metrics
            const indicatorsDiv = document.getElementById('indicators');
            indicatorsDiv.innerHTML = '';
            for (const [label, value] of Object.entries(analysis.metrics)) {
                indicatorsDiv.innerHTML += `
                    <div class="indicator">
                        <div class="indicator-label">${label}</div>
                        <div class="indicator-value">${value}</div>
                    </div>
                `;
            }
            
            // Display analysis
            document.getElementById('analysis').innerHTML = `
                This analysis uses pattern recognition to identify potential deception indicators.
                The system evaluated the statement for linguistic patterns commonly associated with
                deceptive communication, including hedging language, distancing phrases, and 
                structural anomalies.
            `;
            
            // Display key indicators
            if (analysis.indicators.length > 0) {
                document.getElementById('keyIndicators').innerHTML = 
                    '<ul>' + analysis.indicators.map(i => `<li>${i}</li>`).join('') + '</ul>';
            } else {
                document.getElementById('keyIndicators').innerHTML = 
                    'No significant deception indicators detected in this statement.';
            }
            
            // Display recommendations
            let recommendations = '';
            if (analysis.riskScore < 20) {
                recommendations = 'The statement appears genuine based on linguistic analysis. No immediate concerns identified.';
            } else if (analysis.riskScore < 40) {
                recommendations = 'Consider asking follow-up questions for clarification. Pay attention to consistency in responses.';
            } else if (analysis.riskScore < 60) {
                recommendations = 'Recommend verification of key claims. Look for supporting evidence or documentation.';
            } else {
                recommendations = 'High caution advised. Seek independent verification of all claims before proceeding.';
            }
            document.getElementById('recommendations').innerHTML = recommendations;
            
            // Show results
            document.getElementById('results').classList.add('show');
            
            // Scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }
        
        function showError(message) {
            document.getElementById('errorText').textContent = message;
            document.getElementById('error').classList.add('show');
        }
        
        // Allow Enter key to submit (Ctrl+Enter or Cmd+Enter)
        textarea.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                analyzeStatement();
            }
        });
    </script>
</body>
</html>